{"version":3,"file":"makeup-active-descendant/index.min.js","mappings":";;;;;;;;;;;;;AAA+D;AAC3B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,iBAAiB;AAC3B;AACA;AACA;AACA;AACA;AACA,mEAAmE,kBAAkB;AACrF;AACA;AACA,UAAU,qBAAqB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE,kBAAkB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA,oEAAoE,kBAAkB;AACtF;AACA;AACA,UAAU,UAAU;AACpB;AACA;AACA,IAAI,0DAAM;AACV;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH,uEAAuE,kBAAkB;AACzF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,IAAI,0DAAM;AACV;AACA;AACA;AACA,8BAA8B,mEAA8B;AAC5D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,MAAM,0DAAM;AACZ,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;;;ACpIkC;AACpC;AACA;AACA;AACA,cAAc,wBAAwB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,0DAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIE;;;;;;;;;;;;;AC7DF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,IAAI,KAAK,aAAa;AAC1F;AACA;AACA,SAAS;AACT;AACA;AACA,uDAAuD,aAAa;AACpE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQE;;;;;;;;;;;;;AClE+C;AACE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,wDAAwD;AAClE;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,GAAG;AACH;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,4CAA4C,mBAAmB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAAqB;AACzB,IAAI,6DAAwB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI,6DAAwB;AAC5B,IAAI,gEAA2B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;AC5RF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,EAAE,UAAU,EAAE,cAAc;AACpD;AACA;AACA,6BAA6B,IAAI,GAAG,mBAAmB;AACvD;AACA;AACA;AAGE;;;;;;;UC3BF;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;ACNa;;AAEb,+CAA+C,mBAAO,CAAC,IAAyC;AAChG,iDAAiD,gDAAgD,uCAAuC,sCAAsC,oFAAoF,4DAA4D;AAC9T,qDAAqD,6CAA6C,cAAc,4EAA4E,SAAS,kBAAkB,mDAAmD,+BAA+B,yBAAyB,iBAAiB,sFAAsF,uBAAuB,2EAA2E,qFAAqF,sCAAsC,4CAA4C,OAAO,8BAA8B,sBAAsB,aAAa,0BAA0B;AACpxB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,CAAC;AACD;AACA;AACA;AACA,GAAG;AACH,CAAC,E","sources":["webpack://root/./packages/makeup-active-descendant/dist/mjs/index.js","webpack://root/./packages/makeup-exit-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-key-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-navigation-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-next-id/dist/mjs/index.js","webpack://root/webpack/bootstrap","webpack://root/webpack/runtime/define property getters","webpack://root/webpack/runtime/hasOwnProperty shorthand","webpack://root/webpack/runtime/make namespace object","webpack://root/./docs/makeup-active-descendant/index.compiled.js"],"sourcesContent":["import * as NavigationEmitter from \"makeup-navigation-emitter\";\nimport nextID from \"makeup-next-id\";\nconst defaultOptions = {\n  activeDescendantClassName: \"active-descendant\",\n  autoInit: \"none\",\n  autoReset: \"none\",\n  autoScroll: false,\n  axis: \"both\",\n  wrap: false\n};\nfunction onModelInit(e) {\n  const { items, toIndex } = e.detail;\n  const itemEl = items[toIndex];\n  if (itemEl) {\n    itemEl.classList.add(this._options.activeDescendantClassName);\n    this._focusEl.setAttribute(\"aria-activedescendant\", itemEl.id);\n  }\n  this._el.dispatchEvent(new CustomEvent(\"activeDescendantInit\", { detail: e.detail }));\n}\nfunction onModelChange(e) {\n  const { fromIndex, toIndex } = e.detail;\n  const fromItem = this.items[fromIndex];\n  const toItem = this.items[toIndex];\n  if (fromItem) {\n    fromItem.classList.remove(this._options.activeDescendantClassName);\n  }\n  if (toItem) {\n    toItem.classList.add(this._options.activeDescendantClassName);\n    this._focusEl.setAttribute(\"aria-activedescendant\", toItem.id);\n    if (this._options.autoScroll && this._containerEl) {\n      this._containerEl.scrollTop = toItem.offsetTop - this._containerEl.offsetHeight / 2;\n    }\n  }\n  this._el.dispatchEvent(new CustomEvent(\"activeDescendantChange\", { detail: e.detail }));\n}\nfunction onModelReset(e) {\n  const toIndex = e.detail.toIndex;\n  const activeClassName = this._options.activeDescendantClassName;\n  this.items.forEach(function(el) {\n    el.classList.remove(activeClassName);\n  });\n  if (toIndex !== null && toIndex !== -1) {\n    const itemEl = this.items[toIndex];\n    itemEl.classList.add(activeClassName);\n    this._focusEl.setAttribute(\"aria-activedescendant\", itemEl.id);\n  } else {\n    this._focusEl.removeAttribute(\"aria-activedescendant\");\n  }\n  this._el.dispatchEvent(new CustomEvent(\"activeDescendantReset\", { detail: e.detail }));\n}\nfunction onModelMutation(e) {\n  const { toIndex } = e.detail;\n  const activeDescendantClassName = this.options.activeDescendantClassName;\n  this.items.forEach(function(item, index) {\n    nextID(item);\n    if (index !== toIndex) {\n      item.classList.remove(activeDescendantClassName);\n    } else {\n      item.classList.add(activeDescendantClassName);\n    }\n  });\n  this._el.dispatchEvent(new CustomEvent(\"activeDescendantMutation\", { detail: e.detail }));\n}\nclass ActiveDescendant {\n  constructor(el) {\n    this._el = el;\n    this._onMutationListener = onModelMutation.bind(this);\n    this._onChangeListener = onModelChange.bind(this);\n    this._onResetListener = onModelReset.bind(this);\n    this._onInitListener = onModelInit.bind(this);\n    this._el.addEventListener(\"navigationModelMutation\", this._onMutationListener);\n    this._el.addEventListener(\"navigationModelChange\", this._onChangeListener);\n    this._el.addEventListener(\"navigationModelReset\", this._onResetListener);\n    this._el.addEventListener(\"navigationModelInit\", this._onInitListener);\n  }\n  destroy() {\n    this._el.removeEventListener(\"navigationModelMutation\", this._onMutationListener);\n    this._el.removeEventListener(\"navigationModelChange\", this._onChangeListener);\n    this._el.removeEventListener(\"navigationModelReset\", this._onResetListener);\n    this._el.removeEventListener(\"navigationModelInit\", this._onInitListener);\n  }\n}\nclass LinearActiveDescendant extends ActiveDescendant {\n  constructor(el, focusEl, itemContainerEl, itemSelector, selectedOptions) {\n    super(el);\n    this._options = Object.assign({}, defaultOptions, selectedOptions);\n    this._focusEl = focusEl;\n    this._itemContainerEl = itemContainerEl;\n    this._itemSelector = itemSelector;\n    nextID(this._itemContainerEl);\n    if (this._itemContainerEl !== this._focusEl) {\n      focusEl.setAttribute(\"aria-owns\", this._itemContainerEl.id);\n    }\n    this._navigationEmitter = NavigationEmitter.createLinear(el, itemSelector, {\n      autoInit: this._options.autoInit,\n      autoReset: this._options.autoReset,\n      axis: this._options.axis,\n      ignoreByDelegateSelector: this._options.ignoreByDelegateSelector,\n      wrap: this._options.wrap\n    });\n    this.items.forEach(function(itemEl) {\n      nextID(itemEl);\n    });\n  }\n  get index() {\n    return this._navigationEmitter.model.index;\n  }\n  set index(newIndex) {\n    this._navigationEmitter.model.index = newIndex;\n  }\n  reset() {\n    this._navigationEmitter.model.reset();\n  }\n  get currentItem() {\n    return this._navigationEmitter.model.currentItem;\n  }\n  get items() {\n    return this._navigationEmitter.model.items;\n  }\n  set wrap(newWrap) {\n    this._navigationEmitter.model.options.wrap = newWrap;\n  }\n  destroy() {\n    super.destroy();\n    this._navigationEmitter.destroy();\n  }\n}\nfunction createLinear(el, focusEl, itemContainerEl, itemSelector, selectedOptions) {\n  return new LinearActiveDescendant(el, focusEl, itemContainerEl, itemSelector, selectedOptions);\n}\nexport {\n  createLinear\n};\n","import nextID from \"makeup-next-id\";\nconst focusExitEmitters = {};\nfunction doFocusExit(el, fromElement, toElement) {\n  el.dispatchEvent(new CustomEvent(\"focusExit\", {\n    detail: { fromElement, toElement },\n    bubbles: false\n  }));\n}\nfunction onDocumentFocusIn(e) {\n  const newFocusElement = e.target;\n  const targetIsDescendant = this.el.contains(newFocusElement);\n  if (targetIsDescendant === true) {\n    this.currentFocusElement = newFocusElement;\n  } else {\n    window.removeEventListener(\"blur\", this.onWindowBlurListener);\n    document.removeEventListener(\"focusin\", this.onDocumentFocusInListener);\n    doFocusExit(this.el, this.currentFocusElement, newFocusElement);\n    this.currentFocusElement = null;\n  }\n}\nfunction onWindowBlur() {\n  doFocusExit(this.el, this.currentFocusElement, void 0);\n}\nfunction onWidgetFocusIn() {\n  document.addEventListener(\"focusin\", this.onDocumentFocusInListener);\n  window.addEventListener(\"blur\", this.onWindowBlurListener);\n}\nclass FocusExitEmitter {\n  constructor(el) {\n    this.el = el;\n    this.currentFocusElement = null;\n    this.onWidgetFocusInListener = onWidgetFocusIn.bind(this);\n    this.onDocumentFocusInListener = onDocumentFocusIn.bind(this);\n    this.onWindowBlurListener = onWindowBlur.bind(this);\n    this.el.addEventListener(\"focusin\", this.onWidgetFocusInListener);\n  }\n  removeEventListeners() {\n    window.removeEventListener(\"blur\", this.onWindowBlurListener);\n    document.removeEventListener(\"focusin\", this.onDocumentFocusInListener);\n    this.el.removeEventListener(\"focusin\", this.onWidgetFocusInListener);\n  }\n}\nfunction addFocusExit(el) {\n  let exitEmitter = null;\n  nextID(el);\n  if (!focusExitEmitters[el.id]) {\n    exitEmitter = new FocusExitEmitter(el);\n    focusExitEmitters[el.id] = exitEmitter;\n  }\n  return exitEmitter;\n}\nfunction removeFocusExit(el) {\n  const exitEmitter = focusExitEmitters[el.id];\n  if (exitEmitter) {\n    exitEmitter.removeEventListeners();\n    delete focusExitEmitters[el.id];\n  }\n}\nexport {\n  addFocusExit,\n  removeFocusExit\n};\n","function uncapitalizeFirstLetter(str) {\n  return str.charAt(0).toLowerCase() + str.slice(1);\n}\nfunction onKeyDownOrUp(evt, el, keyEventType) {\n  if (!evt.shiftKey) {\n    const key = evt.key;\n    switch (key) {\n      case \"Enter\":\n      case \"Escape\":\n      case \"PageUp\":\n      case \"PageDown\":\n      case \"End\":\n      case \"Home\":\n      case \"ArrowLeft\":\n      case \"ArrowUp\":\n      case \"ArrowRight\":\n      case \"ArrowDown\":\n        el.dispatchEvent(new CustomEvent(uncapitalizeFirstLetter(`${key}Key${keyEventType}`), {\n          detail: evt,\n          bubbles: true\n        }));\n        break;\n      case \" \":\n        el.dispatchEvent(new CustomEvent(`spacebarKey${keyEventType}`, {\n          detail: evt,\n          bubbles: true\n        }));\n        break;\n      default:\n        return;\n    }\n  }\n}\nfunction onKeyDown(e) {\n  onKeyDownOrUp(e, this, \"Down\");\n}\nfunction onKeyUp(e) {\n  onKeyDownOrUp(e, this, \"Up\");\n}\nfunction addKeyDown(el) {\n  el.addEventListener(\"keydown\", onKeyDown);\n}\nfunction addKeyUp(el) {\n  el.addEventListener(\"keyup\", onKeyUp);\n}\nfunction removeKeyDown(el) {\n  el.removeEventListener(\"keydown\", onKeyDown);\n}\nfunction removeKeyUp(el) {\n  el.removeEventListener(\"keyup\", onKeyUp);\n}\nfunction add(el) {\n  addKeyDown(el);\n  addKeyUp(el);\n}\nfunction remove(el) {\n  removeKeyDown(el);\n  removeKeyUp(el);\n}\nexport {\n  add,\n  addKeyDown,\n  addKeyUp,\n  remove,\n  removeKeyDown,\n  removeKeyUp\n};\n","import * as KeyEmitter from \"makeup-key-emitter\";\nimport * as ExitEmitter from \"makeup-exit-emitter\";\nconst defaultOptions = {\n  axis: \"both\",\n  autoInit: \"interactive\",\n  autoReset: \"current\",\n  ignoreByDelegateSelector: null,\n  wrap: false\n};\nfunction isItemNavigable(el) {\n  return !el.hidden && el.getAttribute(\"aria-disabled\") !== \"true\";\n}\nfunction isIndexNavigable(items, index) {\n  return index >= 0 && index < items.length ? isItemNavigable(items[index]) : false;\n}\nfunction findNavigableItems(items) {\n  return items.filter(isItemNavigable);\n}\nfunction findFirstNavigableIndex(items) {\n  return items.findIndex((item) => isItemNavigable(item));\n}\nfunction findLastNavigableIndex(items) {\n  return items.indexOf(findNavigableItems(items).reverse()[0]);\n}\nfunction findIndexByAttribute(items, attribute, value) {\n  return items.findIndex((item) => isItemNavigable(item) && item.getAttribute(attribute) === value);\n}\nfunction findFirstNavigableAriaCheckedIndex(items) {\n  return findIndexByAttribute(items, \"aria-checked\", \"true\");\n}\nfunction findFirstNavigableAriaSelectedIndex(items) {\n  return findIndexByAttribute(items, \"aria-selected\", \"true\");\n}\nfunction findIgnoredByDelegateItems(el, options) {\n  return options.ignoreByDelegateSelector !== null ? [...el.querySelectorAll(options.ignoreByDelegateSelector)] : [];\n}\nfunction findPreviousNavigableIndex(items, index, wrap) {\n  let previousNavigableIndex = -1;\n  if (index === null) {\n  } else if (atStart(items, index)) {\n    if (wrap === true) {\n      previousNavigableIndex = findLastNavigableIndex(items);\n    }\n  } else {\n    let i = index;\n    while (--i >= 0) {\n      if (isItemNavigable(items[i])) {\n        previousNavigableIndex = i;\n        break;\n      }\n    }\n  }\n  return previousNavigableIndex;\n}\nfunction findNextNavigableIndex(items, index, wrap) {\n  let nextNavigableIndex = -1;\n  if (index === null) {\n    nextNavigableIndex = findFirstNavigableIndex(items);\n  } else if (atEnd(items, index)) {\n    if (wrap === true) {\n      nextNavigableIndex = findFirstNavigableIndex(items);\n    }\n  } else {\n    let i = index;\n    while (++i < items.length) {\n      if (isItemNavigable(items[i])) {\n        nextNavigableIndex = i;\n        break;\n      }\n    }\n  }\n  return nextNavigableIndex;\n}\nfunction findIndexPositionByType(typeOrNum, items, currentIndex) {\n  let index = -1;\n  switch (typeOrNum) {\n    case \"none\":\n      index = null;\n      break;\n    case \"current\":\n      index = currentIndex;\n      break;\n    case \"interactive\":\n      index = findFirstNavigableIndex(items);\n      break;\n    case \"ariaChecked\":\n      index = findFirstNavigableAriaCheckedIndex(items);\n      break;\n    case \"ariaSelected\":\n      index = findFirstNavigableAriaSelectedIndex(items);\n      break;\n    case \"ariaSelectedOrInteractive\":\n      index = findFirstNavigableAriaSelectedIndex(items);\n      index = index === -1 ? findFirstNavigableIndex(items) : index;\n      break;\n    default:\n      index = typeof typeOrNum === \"number\" || typeOrNum === null ? typeOrNum : -1;\n  }\n  return index;\n}\nfunction atStart(items, index) {\n  return index === findFirstNavigableIndex(items);\n}\nfunction atEnd(items, index) {\n  return index === findLastNavigableIndex(items);\n}\nfunction onKeyPrev(e) {\n  const ignoredByDelegateItems = findIgnoredByDelegateItems(this._el, this.options);\n  if (ignoredByDelegateItems.length === 0 || !ignoredByDelegateItems.includes(e.detail.target)) {\n    this.index = findPreviousNavigableIndex(this.items, this.index, this.options.wrap);\n  }\n}\nfunction onKeyNext(e) {\n  const ignoredByDelegateItems = findIgnoredByDelegateItems(this._el, this.options);\n  if (ignoredByDelegateItems.length === 0 || !ignoredByDelegateItems.includes(e.detail.target)) {\n    this.index = findNextNavigableIndex(this.items, this.index, this.options.wrap);\n  }\n}\nfunction onClick(e) {\n  const itemIndex = this.indexOf(e.target.closest(this._itemSelector));\n  if (isIndexNavigable(this.items, itemIndex)) {\n    this.index = itemIndex;\n  }\n}\nfunction onKeyHome(e) {\n  const ignoredByDelegateItems = findIgnoredByDelegateItems(this._el, this.options);\n  if (ignoredByDelegateItems.length === 0 || !ignoredByDelegateItems.includes(e.detail.target)) {\n    this.index = findFirstNavigableIndex(this.items);\n  }\n}\nfunction onKeyEnd(e) {\n  const ignoredByDelegateItems = findIgnoredByDelegateItems(this._el, this.options);\n  if (ignoredByDelegateItems.length === 0 || !ignoredByDelegateItems.includes(e.detail.target)) {\n    this.index = findLastNavigableIndex(this.items);\n  }\n}\nfunction onFocusExit() {\n  if (this.options.autoReset !== null) {\n    this.reset();\n  }\n}\nfunction onMutation(e) {\n  const fromIndex = this.index;\n  let toIndex = this.index;\n  const { addedNodes, attributeName, removedNodes, target, type } = e[0];\n  if (type === \"attributes\") {\n    if (target === this.currentItem) {\n      if (attributeName === \"aria-disabled\") {\n        toIndex = this.index;\n      } else if (attributeName === \"hidden\") {\n        toIndex = findFirstNavigableIndex(this.items);\n      }\n    } else {\n      toIndex = this.index;\n    }\n  } else if (type === \"childList\") {\n    if (removedNodes.length > 0 && [...removedNodes].includes(this._cachedElement)) {\n      toIndex = findFirstNavigableIndex(this.items);\n    } else if (removedNodes.length > 0 || addedNodes.length > 0) {\n      toIndex = this.indexOf(this._cachedElement);\n    }\n  }\n  this._index = toIndex;\n  this._el.dispatchEvent(new CustomEvent(\"navigationModelMutation\", {\n    bubbles: false,\n    detail: { fromIndex, toIndex }\n  }));\n}\nclass NavigationModel {\n  constructor(el, itemSelector, selectedOptions) {\n    this.options = Object.assign({}, defaultOptions, selectedOptions);\n    this._el = el;\n    this._itemSelector = itemSelector;\n  }\n}\nclass LinearNavigationModel extends NavigationModel {\n  constructor(el, itemSelector, selectedOptions) {\n    super(el, itemSelector, selectedOptions);\n    const fromIndex = this._index;\n    const toIndex = findIndexPositionByType(this.options.autoInit, this.items, this.index);\n    this._index = toIndex;\n    this._cachedElement = this.items[toIndex];\n    this._el.dispatchEvent(new CustomEvent(\"navigationModelInit\", {\n      bubbles: false,\n      detail: {\n        firstInteractiveIndex: this.firstNavigableIndex,\n        fromIndex,\n        items: this.items,\n        toIndex\n      }\n    }));\n  }\n  get currentItem() {\n    return this.items[this.index];\n  }\n  get items() {\n    return [...this._el.querySelectorAll(`${this._itemSelector}`)];\n  }\n  get index() {\n    return this._index;\n  }\n  set index(toIndex) {\n    if (toIndex === this.index) {\n      return;\n    } else if (!isIndexNavigable(this.items, toIndex)) {\n    } else {\n      const fromIndex = this.index;\n      this._cachedElement = this.items[toIndex];\n      this._index = toIndex;\n      this._el.dispatchEvent(new CustomEvent(\"navigationModelChange\", {\n        bubbles: false,\n        detail: { fromIndex, toIndex }\n      }));\n    }\n  }\n  indexOf(element) {\n    return this.items.indexOf(element);\n  }\n  reset() {\n    const fromIndex = this.index;\n    const toIndex = findIndexPositionByType(this.options.autoReset, this.items, this.index);\n    if (toIndex !== fromIndex) {\n      this._index = toIndex;\n      this._el.dispatchEvent(new CustomEvent(\"navigationModelReset\", {\n        bubbles: false,\n        detail: { fromIndex, toIndex }\n      }));\n    }\n  }\n}\nclass NavigationEmitter {\n  constructor(el, model) {\n    this.model = model;\n    this.el = el;\n    this._keyPrevListener = onKeyPrev.bind(model);\n    this._keyNextListener = onKeyNext.bind(model);\n    this._keyHomeListener = onKeyHome.bind(model);\n    this._keyEndListener = onKeyEnd.bind(model);\n    this._clickListener = onClick.bind(model);\n    this._focusExitListener = onFocusExit.bind(model);\n    this._observer = new MutationObserver(onMutation.bind(model));\n    KeyEmitter.addKeyDown(this.el);\n    ExitEmitter.addFocusExit(this.el);\n    const axis = model.options.axis;\n    if (axis === \"both\" || axis === \"x\") {\n      this.el.addEventListener(\"arrowLeftKeyDown\", this._keyPrevListener);\n      this.el.addEventListener(\"arrowRightKeyDown\", this._keyNextListener);\n    }\n    if (axis === \"both\" || axis === \"y\") {\n      this.el.addEventListener(\"arrowUpKeyDown\", this._keyPrevListener);\n      this.el.addEventListener(\"arrowDownKeyDown\", this._keyNextListener);\n    }\n    this.el.addEventListener(\"homeKeyDown\", this._keyHomeListener);\n    this.el.addEventListener(\"endKeyDown\", this._keyEndListener);\n    this.el.addEventListener(\"click\", this._clickListener);\n    this.el.addEventListener(\"focusExit\", this._focusExitListener);\n    this._observer.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributeFilter: [\"aria-disabled\", \"hidden\"],\n      attributes: true,\n      attributeOldValue: true\n    });\n  }\n  destroy() {\n    KeyEmitter.removeKeyDown(this.el);\n    ExitEmitter.removeFocusExit(this.el);\n    this.el.removeEventListener(\"arrowLeftKeyDown\", this._keyPrevListener);\n    this.el.removeEventListener(\"arrowRightKeyDown\", this._keyNextListener);\n    this.el.removeEventListener(\"arrowUpKeyDown\", this._keyPrevListener);\n    this.el.removeEventListener(\"arrowDownKeyDown\", this._keyNextListener);\n    this.el.removeEventListener(\"homeKeyDown\", this._keyHomeListener);\n    this.el.removeEventListener(\"endKeyDown\", this._keyEndListener);\n    this.el.removeEventListener(\"click\", this._clickListener);\n    this.el.removeEventListener(\"focusExit\", this._focusExitListener);\n    this._observer.disconnect();\n  }\n}\nfunction createLinear(el, itemSelector, selectedOptions) {\n  const model = new LinearNavigationModel(el, itemSelector, selectedOptions);\n  return new NavigationEmitter(el, model);\n}\nexport {\n  createLinear\n};\n","const sequenceMap = {};\nconst defaultPrefix = \"nid\";\nconst randomPortion = createRandomPortion(3);\nfunction randomNumber(max) {\n  return Math.floor(Math.random() * max);\n}\nfunction createRandomPortion(size) {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\";\n  const digits = \"0123456789\";\n  const allChars = letters + digits;\n  let portion = letters[randomNumber(25)];\n  for (let i = 1; i < size; i++) {\n    portion += allChars[randomNumber(35)];\n  }\n  return portion;\n}\nfunction src_default(el, prefix = defaultPrefix) {\n  const separator = prefix === \"\" ? \"\" : \"-\";\n  const key = `${prefix}${separator}${randomPortion}`;\n  sequenceMap[key] = sequenceMap[key] || 0;\n  if (!el.id) {\n    el.setAttribute(\"id\", `${key}-${sequenceMap[key]++}`);\n  }\n  return el.id;\n}\nexport {\n  src_default as default\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\n\nvar ActiveDescendant = _interopRequireWildcard(require(\"../../packages/makeup-active-descendant\"));\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n// REQUIRE\n//const ActiveDescendant = require('../../packages/makeup-active-descendant');\n\n// IMPORT\n\nvar navs = [];\nvar append = document.getElementById('append');\nvar prepend = document.getElementById('prepend');\nvar removeFirst = document.getElementById('removeFirst');\nvar removeLast = document.getElementById('removeLast');\nvar widgetEls = document.querySelectorAll('.widget');\nvar wrapCheckbox = document.getElementById('wrap');\nvar log = e => console.log(e.type, e.detail);\nprepend.addEventListener('click', function () {\n  widgetEls.forEach(function (el) {\n    var list = el.querySelector('ul');\n    var newListItem = document.createElement('li');\n    newListItem.setAttribute('role', 'option');\n    var numListItems = parseInt(list.querySelectorAll('li').length, 10);\n    newListItem.innerText = \"Item \".concat(numListItems + 1);\n    list.insertBefore(newListItem, list.children[0]);\n  });\n});\nappend.addEventListener('click', function () {\n  widgetEls.forEach(function (el) {\n    var list = el.querySelector('ul');\n    var newListItem = document.createElement('li');\n    newListItem.setAttribute('role', 'option');\n    var numListItems = parseInt(list.querySelectorAll('li').length, 10);\n    newListItem.innerText = \"Item \".concat(numListItems + 1);\n    list.appendChild(newListItem);\n  });\n});\nremoveFirst.addEventListener('click', function () {\n  widgetEls.forEach(function (el) {\n    var list = el.querySelector('ul');\n    var node = list.firstElementChild;\n    list.removeChild(node);\n  });\n});\nremoveLast.addEventListener('click', function () {\n  widgetEls.forEach(function (el) {\n    var list = el.querySelector('ul');\n    var node = list.lastElementChild;\n    list.removeChild(node);\n  });\n});\ndisableCurrent.addEventListener('click', function () {\n  navs.forEach(function (nav) {\n    if (nav.currentItem) nav.currentItem.setAttribute('aria-disabled', 'true');\n  });\n});\nwidgetEls.forEach(function (el) {\n  el.addEventListener('activeDescendantInit', log);\n  el.addEventListener('activeDescendantChange', log);\n  el.addEventListener('activeDescendantReset', log);\n  el.addEventListener('activeDescendantMutation', log);\n  var widget = ActiveDescendant.createLinear(el, el.querySelector('input') || el.querySelector('ul'), el.querySelector('ul'), 'li', {\n    nonEmittingElementSelector: 'input[type=\"button\"]'\n  });\n  navs.push(widget);\n});\nwrapCheckbox.addEventListener('change', function (e) {\n  navs.forEach(function (nav) {\n    nav.wrap = e.target.checked;\n  });\n});"],"names":[],"sourceRoot":""}