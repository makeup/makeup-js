{"version":3,"file":"makeup-listbox/index.min.js","mappings":";;;;;;AAAA,mBAAO,CAAC,IAAgC;;;;;;;;;;ACAxC;;;;;;;;;;ACAA;;;;;;;;;;;;;;ACAa;AACkD;AAC3B;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAAM;AACV;AACA;AACA,MAAM;AACN;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,8BAA8B,mEAA8B;AAC5D;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,IAAI,0DAAM;AACV;AACA;AACA;AACA;AACA,MAAM,0DAAM;AACZ,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;;;;ACnIkC;AACpC;AACA;AACA;AACA,cAAc,wBAAwB;AACtC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,mEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIE;;;;;;;;;;;;AC7DF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,EAAE,UAAU,EAAE,cAAc;AACpD;AACA;AACA,6BAA6B,IAAI,GAAG,mBAAmB;AACvD;AACA;AACA;AAGE;;;;;;;;;;;;;;AC3BF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEAAoE,IAAI,KAAK,aAAa;AAC1F;AACA;AACA,SAAS;AACT;AACA;AACA,uDAAuD,aAAa;AACpE;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAQE;;;;;;;;;;;;;;;AClE2D;AACG;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,6BAA6B,kEAA6B;AAC1D;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI,2DAAqB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;;;;AC3L+C;AACE;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,0DAAqB;AACzB,IAAI,6DAAwB;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,IAAI,6DAAwB;AAC5B,IAAI,gEAA2B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGE;;;;;;;;;;;;ACvLF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,UAAU;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,OAAO,EAAE,UAAU,EAAE,cAAc;AACpD;AACA;AACA,6BAA6B,IAAI,GAAG,mBAAmB;AACvD;AACA;AACA;AAGE;;;;;;;;;;;;;AC3BF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIE;;;;;;;UCdF;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA,8CAA8C;;;;;WCA9C;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;ACNa;;AAEb,mBAAO,CAAC,IAAa;;AAErB,mBAAO,CAAC,IAAoB;;AAE5B,4CAA4C,mBAAO,CAAC,IAA+B;;AAEnF,uCAAuC,uCAAuC;;AAE9E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL,GAAG;AACH,E","sources":["webpack://root/./node_modules/@ebay/skin/listbox.js","webpack://root/./docs/docs.css?378e","webpack://root/./node_modules/@ebay/skin/dist/listbox/ds6/listbox.css?7cb3","webpack://root/./packages/makeup-active-descendant/dist/mjs/index.js","webpack://root/./packages/makeup-exit-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-exit-emitter/node_modules/makeup-next-id/dist/mjs/index.js","webpack://root/./packages/makeup-key-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-listbox/dist/mjs/index.js","webpack://root/./packages/makeup-navigation-emitter/dist/mjs/index.js","webpack://root/./packages/makeup-next-id/dist/mjs/index.js","webpack://root/./packages/makeup-prevent-scroll-keys/dist/mjs/index.js","webpack://root/webpack/bootstrap","webpack://root/webpack/runtime/define property getters","webpack://root/webpack/runtime/hasOwnProperty shorthand","webpack://root/webpack/runtime/make namespace object","webpack://root/./docs/makeup-listbox/index.compiled.js"],"sourcesContent":["require('./dist/listbox/ds6/listbox.css');\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","\"use strict\";\nimport * as NavigationEmitter from \"makeup-navigation-emitter\";\nimport nextID from \"makeup-next-id\";\nconst defaultOptions = {\n  activeDescendantClassName: \"active-descendant\",\n  autoInit: -1,\n  autoReset: -1,\n  autoScroll: false,\n  axis: \"both\",\n  ignoreButtons: false\n};\nfunction onModelMutation() {\n  const options = this._options;\n  const modelIndex = this._navigationEmitter.model.index;\n  this.filteredItems.forEach(function(item, index) {\n    nextID(item);\n    if (index !== modelIndex) {\n      item.classList.remove(options.activeDescendantClassName);\n    } else {\n      item.classList.add(options.activeDescendantClassName);\n    }\n  });\n}\nfunction onModelChange(e) {\n  const fromItem = this.filteredItems[e.detail.fromIndex];\n  const toItem = this.filteredItems[e.detail.toIndex];\n  if (fromItem) {\n    fromItem.classList.remove(this._options.activeDescendantClassName);\n  }\n  if (toItem) {\n    toItem.classList.add(this._options.activeDescendantClassName);\n    this._focusEl.setAttribute(\"aria-activedescendant\", toItem.id);\n    if (this._options.autoScroll && this._containerEl) {\n      this._containerEl.scrollTop = toItem.offsetTop - this._containerEl.offsetHeight / 2;\n    }\n  }\n  this._el.dispatchEvent(new CustomEvent(\"activeDescendantChange\", {\n    detail: {\n      fromIndex: e.detail.fromIndex,\n      toIndex: e.detail.toIndex\n    }\n  }));\n}\nfunction onModelReset(e) {\n  const toIndex = e.detail.toIndex;\n  const activeClassName = this._options.activeDescendantClassName;\n  this.filteredItems.forEach(function(el) {\n    el.classList.remove(activeClassName);\n  });\n  if (toIndex > -1) {\n    const itemEl = this.filteredItems[toIndex];\n    itemEl.classList.add(activeClassName);\n    this._focusEl.setAttribute(\"aria-activedescendant\", itemEl.id);\n  } else {\n    this._focusEl.removeAttribute(\"aria-activedescendant\");\n  }\n}\nclass ActiveDescendant {\n  constructor(el) {\n    this._el = el;\n    this._onMutationListener = onModelMutation.bind(this);\n    this._onChangeListener = onModelChange.bind(this);\n    this._onResetListener = onModelReset.bind(this);\n    this._el.addEventListener(\"navigationModelMutation\", this._onMutationListener);\n    this._el.addEventListener(\"navigationModelChange\", this._onChangeListener);\n    this._el.addEventListener(\"navigationModelReset\", this._onResetListener);\n  }\n  destroy() {\n    this._el.removeEventListener(\"navigationModelMutation\", this._onMutationListener);\n    this._el.removeEventListener(\"navigationModelChange\", this._onChangeListener);\n    this._el.removeEventListener(\"navigationModelReset\", this._onResetListener);\n  }\n}\nclass LinearActiveDescendant extends ActiveDescendant {\n  constructor(el, focusEl, containerEl, itemSelector, selectedOptions) {\n    super(el);\n    this._options = Object.assign({}, defaultOptions, selectedOptions);\n    this._navigationEmitter = NavigationEmitter.createLinear(el, itemSelector, {\n      autoInit: this._options.autoInit,\n      autoReset: this._options.autoReset,\n      axis: this._options.axis,\n      ignoreButtons: this._options.ignoreButtons\n    });\n    this._focusEl = focusEl;\n    this._containerEl = containerEl;\n    this._itemSelector = itemSelector;\n    nextID(containerEl);\n    if (containerEl !== focusEl) {\n      focusEl.setAttribute(\"aria-owns\", containerEl.id);\n    }\n    this.items.forEach(function(itemEl) {\n      nextID(itemEl);\n    });\n    if (this._options.autoInit > -1) {\n      const itemEl = this.filteredItems[this._options.autoInit];\n      itemEl.classList.add(this._options.activeDescendantClassName);\n      this._focusEl.setAttribute(\"aria-activedescendant\", itemEl.id);\n    }\n  }\n  get index() {\n    return this._navigationEmitter.model.index;\n  }\n  set index(newIndex) {\n    this._navigationEmitter.model.index = newIndex;\n  }\n  reset() {\n    this._navigationEmitter.model.reset();\n  }\n  get filteredItems() {\n    return this._navigationEmitter.model.filteredItems;\n  }\n  get items() {\n    return this._navigationEmitter.model.items;\n  }\n  get _items() {\n    return this.items;\n  }\n  set wrap(newWrap) {\n    this._navigationEmitter.model.options.wrap = newWrap;\n  }\n  destroy() {\n    super.destroy();\n    this._navigationEmitter.destroy();\n  }\n}\nfunction createLinear(el, focusEl, containerEl, itemSelector, selectedOptions) {\n  return new LinearActiveDescendant(el, focusEl, containerEl, itemSelector, selectedOptions);\n}\n\"use strict\";\nexport {\n  createLinear\n};\n","import nextID from \"makeup-next-id\";\nconst focusExitEmitters = {};\nfunction doFocusExit(el, fromElement, toElement) {\n  el.dispatchEvent(new CustomEvent(\"focusExit\", {\n    detail: { fromElement, toElement },\n    bubbles: false\n  }));\n}\nfunction onDocumentFocusIn(e) {\n  const newFocusElement = e.target;\n  const targetIsDescendant = this.el.contains(newFocusElement);\n  if (targetIsDescendant === true) {\n    this.currentFocusElement = newFocusElement;\n  } else {\n    window.removeEventListener(\"blur\", this.onWindowBlurListener);\n    document.removeEventListener(\"focusin\", this.onDocumentFocusInListener);\n    doFocusExit(this.el, this.currentFocusElement, newFocusElement);\n    this.currentFocusElement = null;\n  }\n}\nfunction onWindowBlur() {\n  doFocusExit(this.el, this.currentFocusElement, void 0);\n}\nfunction onWidgetFocusIn() {\n  document.addEventListener(\"focusin\", this.onDocumentFocusInListener);\n  window.addEventListener(\"blur\", this.onWindowBlurListener);\n}\nclass FocusExitEmitter {\n  constructor(el) {\n    this.el = el;\n    this.currentFocusElement = null;\n    this.onWidgetFocusInListener = onWidgetFocusIn.bind(this);\n    this.onDocumentFocusInListener = onDocumentFocusIn.bind(this);\n    this.onWindowBlurListener = onWindowBlur.bind(this);\n    this.el.addEventListener(\"focusin\", this.onWidgetFocusInListener);\n  }\n  removeEventListeners() {\n    window.removeEventListener(\"blur\", this.onWindowBlurListener);\n    document.removeEventListener(\"focusin\", this.onDocumentFocusInListener);\n    this.el.removeEventListener(\"focusin\", this.onWidgetFocusInListener);\n  }\n}\nfunction addFocusExit(el) {\n  let exitEmitter = null;\n  nextID(el);\n  if (!focusExitEmitters[el.id]) {\n    exitEmitter = new FocusExitEmitter(el);\n    focusExitEmitters[el.id] = exitEmitter;\n  }\n  return exitEmitter;\n}\nfunction removeFocusExit(el) {\n  const exitEmitter = focusExitEmitters[el.id];\n  if (exitEmitter) {\n    exitEmitter.removeEventListeners();\n    delete focusExitEmitters[el.id];\n  }\n}\nexport {\n  addFocusExit,\n  removeFocusExit\n};\n","const sequenceMap = {};\nconst defaultPrefix = \"nid\";\nconst randomPortion = createRandomPortion(3);\nfunction randomNumber(max) {\n  return Math.floor(Math.random() * max);\n}\nfunction createRandomPortion(size) {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\";\n  const digits = \"0123456789\";\n  const allChars = letters + digits;\n  let portion = letters[randomNumber(25)];\n  for (let i = 1; i < size; i++) {\n    portion += allChars[randomNumber(35)];\n  }\n  return portion;\n}\nfunction src_default(el, prefix = defaultPrefix) {\n  const separator = prefix === \"\" ? \"\" : \"-\";\n  const key = `${prefix}${separator}${randomPortion}`;\n  sequenceMap[key] = sequenceMap[key] || 0;\n  if (!el.id) {\n    el.setAttribute(\"id\", `${key}-${sequenceMap[key]++}`);\n  }\n  return el.id;\n}\nexport {\n  src_default as default\n};\n","function uncapitalizeFirstLetter(str) {\n  return str.charAt(0).toLowerCase() + str.slice(1);\n}\nfunction onKeyDownOrUp(evt, el, keyEventType) {\n  if (!evt.shiftKey) {\n    const key = evt.key;\n    switch (key) {\n      case \"Enter\":\n      case \"Escape\":\n      case \"PageUp\":\n      case \"PageDown\":\n      case \"End\":\n      case \"Home\":\n      case \"ArrowLeft\":\n      case \"ArrowUp\":\n      case \"ArrowRight\":\n      case \"ArrowDown\":\n        el.dispatchEvent(new CustomEvent(uncapitalizeFirstLetter(`${key}Key${keyEventType}`), {\n          detail: evt,\n          bubbles: true\n        }));\n        break;\n      case \" \":\n        el.dispatchEvent(new CustomEvent(`spacebarKey${keyEventType}`, {\n          detail: evt,\n          bubbles: true\n        }));\n        break;\n      default:\n        return;\n    }\n  }\n}\nfunction onKeyDown(e) {\n  onKeyDownOrUp(e, this, \"Down\");\n}\nfunction onKeyUp(e) {\n  onKeyDownOrUp(e, this, \"Up\");\n}\nfunction addKeyDown(el) {\n  el.addEventListener(\"keydown\", onKeyDown);\n}\nfunction addKeyUp(el) {\n  el.addEventListener(\"keyup\", onKeyUp);\n}\nfunction removeKeyDown(el) {\n  el.removeEventListener(\"keydown\", onKeyDown);\n}\nfunction removeKeyUp(el) {\n  el.removeEventListener(\"keyup\", onKeyUp);\n}\nfunction add(el) {\n  addKeyDown(el);\n  addKeyUp(el);\n}\nfunction remove(el) {\n  removeKeyDown(el);\n  removeKeyUp(el);\n}\nexport {\n  add,\n  addKeyDown,\n  addKeyUp,\n  remove,\n  removeKeyDown,\n  removeKeyUp\n};\n","import * as ActiveDescendant from \"makeup-active-descendant\";\nimport * as PreventScrollKeys from \"makeup-prevent-scroll-keys\";\nconst defaultOptions = {\n  activeDescendantClassName: \"listbox__option--active\",\n  autoReset: null,\n  autoSelect: true,\n  customElementMode: false,\n  focusableElement: null,\n  listboxOwnerElement: null,\n  multiSelect: false,\n  useAriaChecked: true\n};\nclass src_default {\n  constructor(widgetEl, selectedOptions) {\n    this._options = Object.assign({}, defaultOptions, selectedOptions);\n    this.el = widgetEl;\n    this._activeDescendantRootEl = this._options.listboxOwnerElement || this.el;\n    if (widgetEl.getAttribute(\"role\") === \"listbox\") {\n      this._listboxEl = widgetEl;\n    } else {\n      this._listboxEl = this.el.querySelector(\"[role=listbox]\");\n    }\n    if (!this._options.focusableElement && this._listboxEl.getAttribute(\"tabindex\") === null) {\n      this._listboxEl.setAttribute(\"tabindex\", \"0\");\n    }\n    this._activeDescendant = ActiveDescendant.createLinear(this._activeDescendantRootEl, this._options.focusableElement || this._listboxEl, this._listboxEl, \"[role=option]\", {\n      activeDescendantClassName: this._options.activeDescendantClassName,\n      autoInit: this.index,\n      autoReset: this._options.autoReset,\n      axis: \"y\",\n      ignoreButtons: true\n    });\n    PreventScrollKeys.add(this.el);\n    this._onFocusListener = _onFocus.bind(this);\n    this._onMouseDownListener = _onMouseDown.bind(this);\n    this._onKeyDownListener = _onKeyDown.bind(this);\n    this._onClickListener = _onClick.bind(this);\n    this._onActiveDescendantChangeListener = _onActiveDescendantChange.bind(this);\n    this._onMutationListener = _onMutation.bind(this);\n    this.el.classList.add(\"listbox--js\");\n    if (!this._options.customElementMode) {\n      this._mutationObserver = new MutationObserver(this._onMutationListener);\n      this._observeMutations();\n      this._observeEvents();\n    }\n  }\n  _observeMutations() {\n    if (!this._options.customElementMode) {\n      this._mutationObserver.observe(this._listboxEl, {\n        attributeFilter: [\"aria-selected\"],\n        attributes: true,\n        childList: true,\n        subtree: true\n      });\n    }\n  }\n  _unobserveMutations() {\n    if (!this._options.customElementMode) {\n      this._mutationObserver.disconnect();\n    }\n  }\n  _observeEvents() {\n    if (this._destroyed !== true) {\n      this._listboxEl.addEventListener(\"focus\", this._onFocusListener);\n      this._listboxEl.addEventListener(\"mousedown\", this._onMouseDownListener);\n      this._activeDescendantRootEl.addEventListener(\"activeDescendantChange\", this._onActiveDescendantChangeListener);\n      this._listboxEl.addEventListener(\"keydown\", this._onKeyDownListener);\n      this._listboxEl.addEventListener(\"click\", this._onClickListener);\n    }\n  }\n  _unobserveEvents() {\n    this._listboxEl.removeEventListener(\"focus\", this._onFocusListener);\n    this._listboxEl.removeEventListener(\"mousedown\", this._onMouseDownListener);\n    this._listboxEl.removeEventListener(\"keydown\", this._onKeyDownListener);\n    this._listboxEl.removeEventListener(\"click\", this._onClickListener);\n    this._activeDescendantRootEl.removeEventListener(\"activeDescendantChange\", this._onActiveDescendantChangeListener);\n  }\n  get index() {\n    return [...this.items].findIndex((el) => el.getAttribute(\"aria-selected\") === \"true\");\n  }\n  get items() {\n    return this._listboxEl.querySelectorAll(\"[role=option]\");\n  }\n  select(index) {\n    this._unobserveMutations();\n    if (_indexInBounds(index, this.items.length)) {\n      this.items[index].setAttribute(\"aria-selected\", \"true\");\n      if (this._options.useAriaChecked === true) {\n        this.items[index].setAttribute(\"aria-checked\", \"true\");\n      }\n      this.el.dispatchEvent(new CustomEvent(\"makeup-listbox-change\", {\n        detail: {\n          optionIndex: index,\n          optionValue: this.items[index].innerText\n        }\n      }));\n    }\n    this._observeMutations();\n  }\n  unselect(index) {\n    this._unobserveMutations();\n    if (_indexInBounds(index, this.items.length)) {\n      this.items[index].setAttribute(\"aria-selected\", \"false\");\n      if (this._options.useAriaChecked === true) {\n        this.items[index].setAttribute(\"aria-checked\", \"false\");\n      }\n    }\n    this._observeMutations();\n  }\n  destroy() {\n    this._destroyed = true;\n    this._unobserveMutations();\n    this._unobserveEvents();\n    this._onFocusListener = null;\n    this._onMouseDownListener = null;\n    this._onKeyDownListener = null;\n    this._onClickListener = null;\n    this._onActiveDescendantChangeListener = null;\n    this._onMutationListener = null;\n  }\n}\nfunction _onFocus() {\n  this._unobserveMutations();\n  if (this._mouseDownFlag !== true && this._options.autoSelect === true && this.index === -1) {\n    this._activeDescendant.index = 0;\n    this.items[0].setAttribute(\"aria-selected\", \"true\");\n    if (this._options.useAriaChecked === true) {\n      this.items[0].setAttribute(\"aria-checked\", \"true\");\n    }\n  }\n  this._mouseDownFlag = false;\n  this._observeMutations();\n}\nfunction _onMouseDown() {\n  this._mouseDownFlag = true;\n}\nfunction _onKeyDown(e) {\n  if (e.keyCode === 13 || e.keyCode === 32) {\n    const toElIndex = this._activeDescendant.index;\n    const toEl = this.items[toElIndex];\n    const isTolElSelected = toEl.getAttribute(\"aria-selected\") === \"true\";\n    if (this._options.autoSelect === false && isTolElSelected === false) {\n      this.unselect(this.index);\n      this.select(toElIndex);\n    }\n  }\n}\nfunction _onClick(e) {\n  const toEl = e.target.closest(\"[role=option]\");\n  const toElIndex = toEl.dataset.makeupIndex;\n  const isTolElSelected = toEl.getAttribute(\"aria-selected\") === \"true\";\n  if (this._options.autoSelect === false && isTolElSelected === false) {\n    this.unselect(this.index);\n    this.select(toElIndex);\n  }\n}\nfunction _onActiveDescendantChange(e) {\n  this.el.dispatchEvent(new CustomEvent(\"makeup-listbox-active-descendant-change\", {\n    detail: e.detail\n  }));\n  if (this._options.autoSelect === true) {\n    const fromEl = this.items[e.detail.fromIndex];\n    const toEl = this.items[e.detail.toIndex];\n    if (fromEl) {\n      this.unselect(e.detail.fromIndex);\n    }\n    if (toEl) {\n      this.select(e.detail.toIndex);\n    }\n  }\n}\nfunction _onMutation(mutationsList) {\n  for (const mutation of mutationsList) {\n    if (mutation.type === \"attributes\") {\n      this.el.dispatchEvent(new CustomEvent(\"makeup-listbox-mutation\", {\n        detail: {\n          attributeName: mutation.attributeName\n        }\n      }));\n    }\n  }\n}\nfunction _indexInBounds(index, size) {\n  return index > -1 && index < size;\n}\nexport {\n  src_default as default\n};\n","import * as KeyEmitter from \"makeup-key-emitter\";\nimport * as ExitEmitter from \"makeup-exit-emitter\";\nconst dataSetKey = \"data-makeup-index\";\nconst defaultOptions = {\n  axis: \"both\",\n  autoInit: 0,\n  autoReset: null,\n  ignoreButtons: false,\n  wrap: false\n};\nconst itemFilter = (el) => !el.hidden;\nfunction clearData(els) {\n  els.forEach((el) => el.removeAttribute(dataSetKey));\n}\nfunction setData(els) {\n  els.forEach((el, index) => el.setAttribute(dataSetKey, index));\n}\nfunction isButton(el) {\n  return el.tagName.toLowerCase() === \"button\" || el.type === \"button\";\n}\nfunction onKeyPrev(e) {\n  if (isButton(e.detail.target) === false || this.options.ignoreButtons === false) {\n    if (!this.atStart()) {\n      this.index--;\n    } else if (this.options.wrap) {\n      this.index = this.filteredItems.length - 1;\n    }\n  }\n}\nfunction onKeyNext(e) {\n  if (isButton(e.detail.target) === false || this.options.ignoreButtons === false) {\n    if (!this.atEnd()) {\n      this.index++;\n    } else if (this.options.wrap) {\n      this.index = 0;\n    }\n  }\n}\nfunction onClick(e) {\n  let element = e.target;\n  let indexData = element.dataset.makeupIndex;\n  while (element !== this._el && !indexData) {\n    element = element.parentNode;\n    indexData = element.dataset.makeupIndex;\n  }\n  if (indexData !== void 0) {\n    this.index = indexData;\n  }\n}\nfunction onKeyHome(e) {\n  if (isButton(e.detail.target) === false || this.options.ignoreButtons === false) {\n    this.index = 0;\n  }\n}\nfunction onKeyEnd(e) {\n  if (isButton(e.detail.target) === false || this.options.ignoreButtons === false) {\n    this.index = this.filteredItems.length;\n  }\n}\nfunction onFocusExit() {\n  if (this.options.autoReset !== null) {\n    this.reset();\n  }\n}\nfunction onMutation() {\n  clearData(this.items);\n  setData(this.filteredItems);\n  this._el.dispatchEvent(new CustomEvent(\"navigationModelMutation\"));\n}\nclass NavigationModel {\n  constructor(el, itemSelector, selectedOptions) {\n    this.options = Object.assign({}, defaultOptions, selectedOptions);\n    this._el = el;\n    this._itemSelector = itemSelector;\n  }\n}\nclass LinearNavigationModel extends NavigationModel {\n  constructor(el, itemSelector, selectedOptions) {\n    super(el, itemSelector, selectedOptions);\n    if (this.options.autoInit !== null) {\n      this._index = this.options.autoInit;\n      this._el.dispatchEvent(new CustomEvent(\"navigationModelInit\", {\n        detail: {\n          items: this.filteredItems,\n          toIndex: this.options.autoInit\n        },\n        bubbles: false\n      }));\n    }\n  }\n  get items() {\n    return this._el.querySelectorAll(this._itemSelector);\n  }\n  get filteredItems() {\n    return Array.prototype.slice.call(this.items).filter(itemFilter);\n  }\n  get index() {\n    return this._index;\n  }\n  set index(newIndex) {\n    if (newIndex > -1 && newIndex < this.filteredItems.length && newIndex !== this.index) {\n      this._el.dispatchEvent(new CustomEvent(\"navigationModelChange\", {\n        detail: {\n          fromIndex: this.index,\n          toIndex: newIndex\n        },\n        bubbles: false\n      }));\n      this._index = newIndex;\n    }\n  }\n  reset() {\n    if (this.options.autoReset !== null) {\n      this._index = this.options.autoReset;\n      this._el.dispatchEvent(new CustomEvent(\"navigationModelReset\", {\n        detail: {\n          toIndex: this.options.autoReset\n        },\n        bubbles: false\n      }));\n    }\n  }\n  atEnd() {\n    return this.index === this.filteredItems.length - 1;\n  }\n  atStart() {\n    return this.index <= 0;\n  }\n}\nclass NavigationEmitter {\n  constructor(el, model) {\n    this.model = model;\n    this.el = el;\n    this._keyPrevListener = onKeyPrev.bind(model);\n    this._keyNextListener = onKeyNext.bind(model);\n    this._keyHomeListener = onKeyHome.bind(model);\n    this._keyEndListener = onKeyEnd.bind(model);\n    this._clickListener = onClick.bind(model);\n    this._focusExitListener = onFocusExit.bind(model);\n    this._observer = new MutationObserver(onMutation.bind(model));\n    setData(model.filteredItems);\n    KeyEmitter.addKeyDown(this.el);\n    ExitEmitter.addFocusExit(this.el);\n    const axis = model.options.axis;\n    if (axis === \"both\" || axis === \"x\") {\n      this.el.addEventListener(\"arrowLeftKeyDown\", this._keyPrevListener);\n      this.el.addEventListener(\"arrowRightKeyDown\", this._keyNextListener);\n    }\n    if (axis === \"both\" || axis === \"y\") {\n      this.el.addEventListener(\"arrowUpKeyDown\", this._keyPrevListener);\n      this.el.addEventListener(\"arrowDownKeyDown\", this._keyNextListener);\n    }\n    this.el.addEventListener(\"homeKeyDown\", this._keyHomeListener);\n    this.el.addEventListener(\"endKeyDown\", this._keyEndListener);\n    this.el.addEventListener(\"click\", this._clickListener);\n    this.el.addEventListener(\"focusExit\", this._focusExitListener);\n    this._observer.observe(this.el, {\n      childList: true,\n      subtree: true,\n      attributeFilter: [\"hidden\"],\n      attributes: true\n    });\n  }\n  destroy() {\n    KeyEmitter.removeKeyDown(this.el);\n    ExitEmitter.removeFocusExit(this.el);\n    this.el.removeEventListener(\"arrowLeftKeyDown\", this._keyPrevListener);\n    this.el.removeEventListener(\"arrowRightKeyDown\", this._keyNextListener);\n    this.el.removeEventListener(\"arrowUpKeyDown\", this._keyPrevListener);\n    this.el.removeEventListener(\"arrowDownKeyDown\", this._keyNextListener);\n    this.el.removeEventListener(\"homeKeyDown\", this._keyHomeListener);\n    this.el.removeEventListener(\"endKeyDown\", this._keyEndListener);\n    this.el.removeEventListener(\"click\", this._clickListener);\n    this.el.removeEventListener(\"focusExit\", this._focusExitListener);\n    this._observer.disconnect();\n  }\n}\nfunction createLinear(el, itemSelector, selectedOptions) {\n  const model = new LinearNavigationModel(el, itemSelector, selectedOptions);\n  return new NavigationEmitter(el, model);\n}\nexport {\n  createLinear\n};\n","const sequenceMap = {};\nconst defaultPrefix = \"nid\";\nconst randomPortion = createRandomPortion(3);\nfunction randomNumber(max) {\n  return Math.floor(Math.random() * max);\n}\nfunction createRandomPortion(size) {\n  const letters = \"abcdefghijklmnopqrstuvwxyz\";\n  const digits = \"0123456789\";\n  const allChars = letters + digits;\n  let portion = letters[randomNumber(25)];\n  for (let i = 1; i < size; i++) {\n    portion += allChars[randomNumber(35)];\n  }\n  return portion;\n}\nfunction src_default(el, prefix = defaultPrefix) {\n  const separator = prefix === \"\" ? \"\" : \"-\";\n  const key = `${prefix}${separator}${randomPortion}`;\n  sequenceMap[key] = sequenceMap[key] || 0;\n  if (!el.id) {\n    el.setAttribute(\"id\", `${key}-${sequenceMap[key]++}`);\n  }\n  return el.id;\n}\nexport {\n  src_default as default\n};\n","function onKeyDown(e) {\n  if (e.keyCode >= 32 && e.keyCode <= 40) {\n    e.preventDefault();\n  }\n}\nfunction add(el) {\n  el.addEventListener(\"keydown\", onKeyDown);\n}\nfunction remove(el) {\n  el.removeEventListener(\"keydown\", onKeyDown);\n}\nexport {\n  add,\n  remove\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\"use strict\";\n\nrequire(\"../docs.css\");\n\nrequire(\"@ebay/skin/listbox\");\n\nvar _makeupListbox = _interopRequireDefault(require(\"../../packages/makeup-listbox\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n// REQUIRE\n// const Listbox = require('../../packages/makeup-listbox').default;\n// IMPORT\nwindow.onload = function () {\n  document.querySelectorAll('.listbox').forEach(function (el, i) {\n    var widget = new _makeupListbox.default(el, {\n      autoSelect: el.dataset.makeupAutoSelect === 'false' ? false : true\n    });\n    el.addEventListener('makeup-listbox-change', function (e) {\n      console.log(e.type, e.detail);\n    });\n    el.addEventListener('makeup-listbox-mutation', function (e) {\n      console.log(e.type, e.detail);\n    });\n  });\n};"],"names":[],"sourceRoot":""}